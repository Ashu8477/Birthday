<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Happy Birthday Arpita üéÇ</title>
    <style>
      :root {
        --pink: #ff4d6d;
        --violet: #6a11cb;
        --bg1: #ff9a9e;
        --bg2: #fad0c4;
      }
      * {
        box-sizing: border-box;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      body {
        font-family: "Poppins", system-ui, -apple-system, Segoe UI, Roboto,
          Arial, sans-serif;
        /* ‚úÖ allow page to scroll */
        min-height: 100dvh; /* better vh on mobile */
        overflow-x: hidden; /* only hide horizontal scroll */
        background:
          radial-gradient(1200px 600px at 50% -10%, #ffffff33, transparent 60%),
          linear-gradient(135deg, var(--bg1), var(--bg2));
        color: #222;
      }

      /* ======= GLOBAL LAYERS ======= */
      #stars,
      #fireworks {
        position: fixed;
        inset: 0;
        pointer-events: none;
        z-index: 0;
      }
      .hearts {
        position: fixed;
        inset: 0;
        pointer-events: none;
        z-index: 1;
      }
      .main {
        position: relative;
        z-index: 2;
        /* ‚úÖ let content decide height so page can scroll */
        min-height: 100dvh;
        display: grid;
        place-items: start center; /* start to allow natural flow */
        padding: 16px;
      }

      /* ======= POPUP / COUNTDOWN ======= */
      .overlay {
        position: fixed;
        inset: 0;
        display: grid;
        place-items: center;
        background: rgba(0, 0, 0, 0.7);
        z-index: 10;
      }
      .popup {
        background: #fff;
        padding: 28px 24px;
        border-radius: 18px;
        width: min(92vw, 520px);
        text-align: center;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.35);
        animation: pop 0.5s ease;
      }
      .popup h2 {
        margin: 0 0 12px;
        font-size: clamp(1.1rem, 2vw + 0.8rem, 1.6rem);
      }
      .btn {
        background: var(--pink);
        color: #fff;
        border: none;
        border-radius: 999px;
        padding: 12px 22px;
        font-weight: 600;
        cursor: pointer;
        transition: transform 0.15s ease, filter 0.2s;
      }
      .btn:hover {
        transform: translateY(-1px);
        filter: brightness(1.05);
      }
      .countdown {
        font-size: clamp(40px, 8vw, 56px);
        font-weight: 800;
        color: #fff;
        letter-spacing: 4px;
        display: none;
      }
      @keyframes pop {
        from {
          transform: scale(0.9);
          opacity: 0;
        }
        to {
          transform: scale(1);
          opacity: 1;
        }
      }

      /* ======= CONTENT GRID ======= */
      .content {
        display: none;
        width: min(1100px, 95vw);
        margin: 0 auto;
      }
      .grid {
        display: grid;
        gap: 18px;
        grid-template-columns: repeat(12, 1fr);
      }
      .card {
        background: rgba(255, 255, 255, 0.9);
        border-radius: 22px;
        padding: 18px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
        backdrop-filter: blur(6px);
      }

      /* Profile + Neon wish */
      .profile.card {
        grid-column: span 5;
      }
      .profile .pic {
        width: clamp(140px, 24vw, 200px);
        height: clamp(140px, 24vw, 200px);
        border-radius: 50%;
        object-fit: cover;
        border: 6px solid #fff;
        box-shadow: 0 10px 24px rgba(0, 0, 0, 0.25);
        display: block;
        margin: 0 auto 14px;
      }
      .neon {
        text-align: center;
        font-size: clamp(1.2rem, 2.8vw, 1.6rem);
        font-weight: 800;
        /* ‚úÖ softer glow */
        --glow: 0 0 2px #fff, 0 0 6px #fff, 0 0 10px var(--pink),
          0 0 20px var(--pink), 0 0 30px var(--violet);
        text-shadow: var(--glow);
        animation: pulse 2.2s ease-in-out infinite;
        background: linear-gradient(90deg, #ff6a88, #ff99ac, #6a11cb);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        filter: brightness(0.95); /* a touch dimmer overall */
      }
      @keyframes pulse {
        0%, 100% { filter: brightness(0.95); }
        50% { filter: brightness(1.05); }
      }

      /* Multi-line typing */
      .typing.card {
        grid-column: span 7;
      }
      .typing pre {
        margin: 0;
        white-space: pre-wrap;
        font-family: inherit;
        font-size: clamp(1rem, 2.2vw, 1.1rem);
        line-height: 1.6;
        min-height: 110px;
      }
      .cursor::after {
        content: "|";
        animation: blink 1s step-end infinite;
      }
      @keyframes blink { 50% { opacity: 0; } }

      /* Slideshow */
      .slider.card {
        grid-column: span 7;
        display: grid;
        grid-template-rows: auto 44px;
        gap: 8px;
      }
      .slides {
        position: relative;
        height: clamp(180px, 40vw, 260px);
        border-radius: 16px;
        overflow: hidden;
        background: #000;
      }
      .slide { position: absolute; inset: 0; opacity: 0; transition: opacity .6s ease; }
      .slide.active { opacity: 1; }
      .slide img { width: 100%; height: 100%; object-fit: cover; }
      .controls { display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; }
      .controls button { padding: 8px 14px; border-radius: 999px; border: 1px solid #ddd; background: #fff; cursor: pointer; }

      /* Gift Box Reveal */
      .gift.card { grid-column: span 5; text-align: center; }
      .giftbox { width: clamp(140px, 26vw, 180px); height: clamp(110px, 20vw, 140px); margin: 0 auto; position: relative; cursor: pointer; }
      .box { position: absolute; inset: 20px 0 0 0; margin: auto; width: 100%; height: calc(100% - 20px); background: var(--pink); border-radius: 10px; }
      .lid { position: absolute; width: calc(100% + 20px); height: 40px; left: -10px; top: -10px; background: #ff7a95; border-radius: 10px; transition: transform .6s ease, top .6s ease; }
      .ribbon-vert, .ribbon-hor { position: absolute; background: #fff; }
      .ribbon-vert { width: 18px; height: 120%; left: 50%; transform: translateX(-50%); top: -10%; }
      .ribbon-hor { height: 18px; width: 100%; top: 50%; transform: translateY(-50%); }
      .giftbox.open .lid { transform: rotate(-18deg); top: -38px; }
      .surprise { opacity: 0; transform: translateY(10px); transition: .6s ease; margin-top: 10px; font-weight: 700; }
      .giftbox.open + .surprise { opacity: 1; transform: translateY(0); }

      /* 3D Flip Card */
      .flipwrap.card { grid-column: span 6; perspective: 1200px; }
      .flip { position: relative; transform-style: preserve-3d; transition: transform .9s; height: clamp(180px, 36vw, 220px); border-radius: 18px; overflow: hidden; }
      .flip .front, .flip .back { position: absolute; inset: 0; backface-visibility: hidden; display: grid; place-items: center; padding: 18px; }
      .flip .front { background: linear-gradient(135deg, #ffe0ea, #fff); }
      .flip .back { background: linear-gradient(135deg, #e9e5ff, #fff); transform: rotateY(180deg); text-align: center; }
      .flipwrap:hover .flip { transform: rotateY(180deg); }

      /* Cake with candles (SVG) */
      .cake.card { grid-column: span 6; display: grid; gap: 12px; place-items: center; text-align: center; }
      .cake svg { width: min(100%, 280px); height: auto; }
      .flame { transform-origin: 50% 90%; animation: flicker .18s infinite alternate; }
      @keyframes flicker { from { transform: scaleY(0.9); } to { transform: scaleY(1.05); } }

      /* Hearts (bonus background ambience) */
      .heart { position: absolute; bottom: -24px; font-size: 20px; animation: floatUp linear forwards; opacity: 0.9; }
      @keyframes floatUp { to { transform: translateY(-110vh) translateX(var(--tx, 0)); opacity: 0; } }

      .muted { opacity: 0.65; font-size: 0.9rem; }

      /* ======= üì± MOBILE LAYOUT ======= */
      @media (max-width: 768px) {
        .grid { grid-template-columns: repeat(12, 1fr); }
        .profile.card,
        .typing.card,
        .slider.card,
        .gift.card,
        .flipwrap.card,
        .cake.card { grid-column: 1 / -1; }
        .controls { gap: 8px; }
        .card { padding: 14px; border-radius: 18px; }
        .muted { font-size: 0.95rem; }
      }
    </style>
  </head>
  <body>
    <!-- Sparkling stars layer -->
    <canvas id="stars"></canvas>
    <!-- Fireworks layer -->
    <canvas id="fireworks"></canvas>
    <!-- Floating hearts container -->
    <div class="hearts" id="hearts"></div>

    <!-- Overlay: popup + countdown -->
    <div class="overlay" id="overlay">
      <div class="popup" id="popup">
        <h2>üéÅ Hey Arpita, click below for a surprise!</h2>
        <button class="btn" id="startBtn">Open Surprise</button>
        <p class="muted" style="margin-top: 10px">Tip: volume unmute kar lo üòä</p>
      </div>
      <div class="countdown" id="countdown">3</div>
    </div>

    <!-- Main App -->
    <main class="main">
      <div class="content" id="content">
        <div class="grid">
          <!-- Profile + Neon -->
          <section class="profile card">
            <img class="pic" src="arpita-photo.jpeg" alt="Arpita" />
            <div class="neon">üéâ Happy Birthday, Arpita! üí´</div>
            <div class="muted" style="text-align: center; margin-top: 6px">
              Kanha Ji hamesha kripa banaye rakhein üôè
            </div>
          </section>

          <!-- Multi-line typing -->
          <section class="typing card">
            <pre id="typeTarget" class="cursor"></pre>
            <div style="display: flex; gap: 8px; flex-wrap: wrap">
              <button class="btn" id="voiceBtn" title="Voice Wish">üîä Voice Wish</button>
              <button class="btn" id="confettiBtn" title="Confetti">üéä Confetti</button>
            </div>
          </section>

          <!-- Slideshow -->
          <section class="slider card">
            <div class="slides" id="slides">
              <div class="slide active"><img src="img1.jpeg" alt="memory 1" /></div>
              <div class="slide"><img src="img2.jpeg" alt="memory 2" /></div>
              <div class="slide"><img src="img3.jpeg" alt="memory 3" /></div>
              <div class="slide"><img src="img4.jpeg" alt="memory 4" /></div>
            </div>
            <div class="controls">
              <button id="prev">‚óÄÔ∏è Prev</button>
              <button id="next">Next ‚ñ∂Ô∏è</button>
              <button id="play">‚èØÔ∏è Auto</button>
            </div>
          </section>

          <!-- Gift box -->
          <section class="gift card">
            <div class="giftbox" id="giftBox" title="Click to open">
              <div class="lid"></div>
              <div class="box">
                <div class="ribbon-vert"></div>
                <div class="ribbon-hor"></div>
              </div>
            </div>
            <div class="surprise">Surprise! üéä Tum sabke liye bohot special ho üíñ</div>
            <p class="muted">Gift box par click karo</p>
          </section>

          <!-- 3D Flip Card -->
          <section class="flipwrap card">
            <div class="flip">
              <div class="front">
                <h3 style="margin: 0">üíå Open Me</h3>
                <p class="muted" style="margin: 6px 0 0">Hover / Tap to flip</p>
              </div>
              <div class="back">
                <div>
                  <h3 style="margin: 0">Dear Arpita,</h3>
                  <p style="margin: 0.5rem 0 0">May your year be filled with joy, peace, and endless smiles.<br />Keep shining! ‚ú®</p>
                </div>
              </div>
            </div>
          </section>

          <!-- Cake with candles -->
          <section class="cake card">
            <svg width="280" height="220" viewBox="0 0 280 220" aria-label="Birthday Cake">
              <ellipse cx="140" cy="200" rx="110" ry="14" fill="#e8e8e8" />
              <rect x="60" y="110" width="160" height="70" rx="14" fill="#ffb3c1" />
              <rect x="70" y="100" width="140" height="26" rx="10" fill="#ffdbe3" />
              <path d="M70,118 q10,22 20,0 t20,0 t20,0 t20,0 t20,0 t20,0" fill="#ff9db0" />
              <g id="candles">
                <g transform="translate(100,88)">
                  <rect width="10" height="30" fill="#a7f3d0" />
                  <circle cx="5" cy="-2" r="6" fill="#ffd166" />
                  <ellipse class="flame" cx="5" cy="-6" rx="4" ry="8" fill="#ff9f1c" />
                </g>
                <g transform="translate(135,84)">
                  <rect width="10" height="34" fill="#c7d2fe" />
                  <circle cx="5" cy="-2" r="6" fill="#ffd166" />
                  <ellipse class="flame" cx="5" cy="-8" rx="4" ry="9" fill="#ff9f1c" />
                </g>
                <g transform="translate(170,88)">
                  <rect width="10" height="30" fill="#fde68a" />
                  <circle cx="5" cy="-2" r="6" fill="#ffd166" />
                  <ellipse class="flame" cx="5" cy="-6" rx="4" ry="8" fill="#ff9f1c" />
                </g>
              </g>
            </svg>
            <div style="display: flex; gap: 10px; flex-wrap: wrap">
              <button class="btn" id="blowBtn">üïØÔ∏è Blow Candles</button>
              <button class="btn" id="relightBtn">‚ú® Relight</button>
            </div>
          </section>
        </div>
      </div>
    </main>

    <!-- Audio -->
    <audio id="song" src="happy-birthday.mp3" preload="auto"></audio>

    <!-- Confetti (tiny lib) -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <script>
      /* ================== UTILITIES ================== */
      const $ = (sel) => document.querySelector(sel);
      const $$ = (sel) => document.querySelectorAll(sel);

      /* ================== STARS BACKGROUND ================== */
      (function starsBG() {
        const c = document.getElementById("stars");
        const ctx = c.getContext("2d");
        function resize() {
          c.width = innerWidth; c.height = innerHeight;
        }
        addEventListener("resize", resize); resize();
        const baseCount = Math.min(220, Math.max(120, Math.floor((c.width*c.height)/25000)));
        const stars = Array.from({ length: baseCount }).map(() => ({
          x: Math.random() * c.width,
          y: Math.random() * c.height,
          r: Math.random() * 1.2 + 0.3,
          s: Math.random() * 0.6 + 0.2,
        }));
        function draw(perfNow){
          ctx.clearRect(0, 0, c.width, c.height);
          for (const st of stars) {
            ctx.beginPath();
            ctx.arc(st.x, st.y, st.r, 0, Math.PI * 2);
            ctx.fillStyle = `rgba(255,255,255,${0.6 + Math.sin(perfNow / 600 + st.x) * 0.3})`;
            ctx.fill();
            st.y += st.s * 0.12; if (st.y > c.height) st.y = -2;
          }
        }
        function loop(t){ draw(t); requestAnimationFrame(loop); }
        requestAnimationFrame(loop);
      })();

      /* ================== FIREWORKS ================== */
      const fwCanvas = document.getElementById("fireworks");
      const fctx = fwCanvas.getContext("2d");
      function fwResize(){ fwCanvas.width = innerWidth; fwCanvas.height = innerHeight; }
      addEventListener("resize", fwResize); fwResize();
      let fireworksOn = false; const particles = [];
      function spawnFirework(){
        const x = Math.random() * fwCanvas.width * 0.9 + fwCanvas.width * 0.05;
        const y = Math.random() * fwCanvas.height * 0.4 + fwCanvas.height * 0.1;
        const count = 40 + Math.floor(Math.random() * 40);
        for (let i = 0; i < count; i++) {
          const angle = (Math.PI * 2 * i) / count;
          const speed = 1.5 + Math.random() * 3;
          particles.push({ x, y, vx: Math.cos(angle) * speed, vy: Math.sin(angle) * speed, life: 60 + Math.random() * 30 });
        }
      }
      function fireworksLoop(){
        if (!fireworksOn) { fctx.clearRect(0,0,fwCanvas.width,fwCanvas.height); return; }
        requestAnimationFrame(fireworksLoop);
        fctx.fillStyle = "rgba(0,0,0,0.2)"; fctx.fillRect(0,0,fwCanvas.width,fwCanvas.height);
        for (let i = particles.length - 1; i >= 0; i--) {
          const p = particles[i]; p.x += p.vx; p.y += p.vy; p.vy += 0.02; p.life--;
          fctx.beginPath(); fctx.arc(p.x, p.y, 2, 0, Math.PI * 2); fctx.fillStyle = "rgba(255,255,255,0.9)"; fctx.fill();
          if (p.life <= 0) particles.splice(i, 1);
        }
        if (Math.random() < 0.04) spawnFirework();
      }

      /* ================== HEARTS AMBIENCE ================== */
      const hearts = document.getElementById("hearts");
      function spawnHeart(){
        const el = document.createElement("div"); el.className = "heart"; el.textContent = Math.random() < 0.7 ? "üíñ" : "üíó";
        el.style.left = Math.random() * 100 + "vw"; el.style.setProperty("--tx", Math.random() * 80 - 40 + "px");
        const dur = 4 + Math.random() * 3; el.style.animationDuration = dur + "s";
        hearts.appendChild(el); setTimeout(() => el.remove(), dur * 1000);
      }

      /* ================== POPUP ‚Üí COUNTDOWN ‚Üí REVEAL ================== */
      const overlay = $("#overlay"); const popup = $("#popup"); const countdownEl = $("#countdown");
      $("#startBtn").addEventListener("click", async () => {
        popup.style.display = "none"; countdownEl.style.display = "block";
        let n = 3; countdownEl.textContent = n;
        const tick = () => new Promise((res) => setTimeout(res, 1000));
        while (n > 1) { await tick(); n--; countdownEl.textContent = n; }
        await tick(); overlay.style.display = "none"; startShowtime();
      });

      /* ================== SHOWTIME: trigger all effects ================== */
      function startShowtime(){
        $("#content").style.display = "block";
        const song = $("#song"); song.volume = 0.75; song.play().catch(() => {});
        fireworksOn = true; fireworksLoop();
        if (window.confetti) confetti({ particleCount: 200, spread: 120, origin: { y: 0.6 } });
        setInterval(spawnHeart, 700);
        startTyping();
        sliderAutoPlay(true);
      }

      /* ================== MULTI-LINE TYPING ================== */
      const lines = [
        "üéâ Happy Birthday Arpita!",
        "üíñ You are incredibly special to all of us.",
        "üå∏ Stay blessed, happy and always smiling.",
        "üôè Kanha Ji ki hamesha aap par kripa rahe!",
      ];
      let lineIdx = 0, charIdx = 0, typingTimer = null;
      function startTyping(){
        const out = $("#typeTarget");
        function step(){
          if (lineIdx >= lines.length) { out.classList.remove("cursor"); return; }
          const current = lines[lineIdx];
          out.textContent = lines.slice(0, lineIdx).join("\n") + (lineIdx > 0 ? "\n" : "") + current.slice(0, charIdx);
          charIdx++;
          if (charIdx <= current.length) { typingTimer = setTimeout(step, 60); }
          else { setTimeout(() => { lineIdx++; charIdx = 0; step(); }, 700); }
        }
        step();
      }
      $("#confettiBtn").addEventListener("click", () => window.confetti && confetti({ particleCount: 120, spread: 100 }));

      /* ================== VOICE WISH (TTS) ================== */
      $("#voiceBtn").addEventListener("click", () => {
        const msg = new SpeechSynthesisUtterance("Happy Birthday, Arpita! May Lord Krishna bless you with joy, health, and success.");
        msg.rate = 1; msg.pitch = 1; msg.lang = "en-IN"; speechSynthesis.cancel(); speechSynthesis.speak(msg);
      });

      /* ================== SLIDESHOW ================== */
      const slides = Array.from($$("#slides .slide"));
      let sIndex = 0, autoTimer = null, autoOn = false;
      function showSlide(i){ slides.forEach((s, idx) => s.classList.toggle("active", idx === i)); }
      function next(){ sIndex = (sIndex + 1) % slides.length; showSlide(sIndex); }
      function prev(){ sIndex = (sIndex - 1 + slides.length) % slides.length; showSlide(sIndex); }
      function sliderAutoPlay(on){ autoOn = on; clearInterval(autoTimer); if (on) autoTimer = setInterval(next, 2500); }
      $("#next").onclick = () => { next(); sliderAutoPlay(false); };
      $("#prev").onclick = () => { prev(); sliderAutoPlay(false); };
      $("#play").onclick = () => sliderAutoPlay(!autoOn);

      /* ================== GIFT BOX REVEAL ================== */
      const giftBox = $("#giftBox");
      giftBox.addEventListener("click", () => { giftBox.classList.toggle("open"); if (window.confetti) confetti({ particleCount: 180, spread: 140, origin: { y: 0.6 } }); });

      /* ================== CAKE: BLOW / RELIGHT ================== */
      const blowBtn = $("#blowBtn"), relightBtn = $("#relightBtn");
      const flames = $$("#candles .flame");
      blowBtn.onclick = () => { flames.forEach(f => { f.style.transition = "opacity .3s"; f.style.opacity = "0"; }); if (window.confetti) confetti({ particleCount: 120, spread: 90, origin: { y: 0.7 } }); };
      relightBtn.onclick = () => { flames.forEach(f => { f.style.opacity = "1"; }); };

      /* ================== ACCESSIBILITY: KEY SHORTCUTS ================== */
      addEventListener("keydown", (e) => { if (e.key === "ArrowRight") next(); if (e.key === "ArrowLeft") prev(); });

      /* ================== SAFETY: VISIBILITY CHANGE (pause music) ================== */
      document.addEventListener("visibilitychange", () => { if (document.hidden) $("#song").pause(); });
    </script>
  </body>
</html>
